document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector("#quote_productType"),t=document.querySelector("#otherProductTypeContainer"),o=document.querySelector("#quoteForm"),n=document.querySelector("#loader");if(e&&t){e.value==="other"?(t.style.display="block",t.querySelector("input")&&(t.querySelector("input").required=!0)):(t.style.display="none",t.querySelector("input")&&(t.querySelector("input").required=!1)),e.addEventListener("change",function(){this.value==="other"?(t.style.display="block",t.querySelector("input")&&(t.querySelector("input").required=!0)):(t.style.display="none",t.querySelector("input")&&(t.querySelector("input").required=!1))})}function i(e){if(e){const t=e.closest(".photo-upload-container");if(t){const o=t.querySelector(".product-photo-preview");o&&e.addEventListener("change",function(){if(this.files&&this.files[0]){const e=new FileReader;e.onload=function(e){o.src=e.target.result,o.style.display="block"},e.readAsDataURL(this.files[0])}else o.src="#",o.style.display="none"})}}}document.addEventListener("change",function(e){if(e.target&&e.target.classList.contains("product-type-select")){const t=e.target.closest(".quote-item");if(t){const o=t.querySelector(".other-product-type-container");o&&(e.target.value==="Autre"?(o.style.display="block",o.querySelector("input")&&(o.querySelector("input").required=!0)):(o.style.display="none",o.querySelector("input")&&(o.querySelector("input").required=!1)))}}});document.querySelectorAll(".form-control-file").forEach(function(e){i(e)});document.addEventListener("change",function(e){if(e.target&&e.target.type==="file"&&e.target.classList.contains("form-control-file")){const t=e.target.closest(".photo-upload-container");if(t){const o=t.querySelector(".product-photo-preview");if(o){if(e.target.files&&e.target.files[0]){const t=new FileReader;t.onload=function(e){o.src=e.target.result,o.style.display="block"},t.readAsDataURL(e.target.files[0])}else o.src="#",o.style.display="none"}}}});const r=document.querySelector(".add-item-btn"),s=document.querySelector(".quote-items-wrapper");r&&s&&r.addEventListener("click",function(){const e=s.dataset.prototype,t=parseInt(s.dataset.index),o=e.replace(/__name__/g,t),n=document.createElement("div");n.classList.add("quote-item"),n.innerHTML=o;const r=document.createElement("span");r.classList.add("remove-item"),r.innerHTML='<i class="fas fa-times-circle"></i>',n.prepend(r),s.appendChild(n);const a=n.querySelector(".form-control-file");a&&i(a),s.dataset.index=t+1});document.addEventListener("click",function(e){if(e.target&&(e.target.classList.contains("remove-item")||e.target.closest(".remove-item"))){const t=e.target.closest(".quote-item");t&&t.remove()}});o&&o.addEventListener("submit",function(){const e=document.querySelector("#submitButton");e&&(e.disabled=!0),n&&(n.style.display="flex")})}); 