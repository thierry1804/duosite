document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector("#quote_productType"),t=document.querySelector("#otherProductTypeContainer"),o=document.querySelector("#quoteForm"),n=document.querySelector("#loader");if(e&&t){e.value==="other"?(t.style.display="block",t.querySelector("input")&&(t.querySelector("input").required=!0)):(t.style.display="none",t.querySelector("input")&&(t.querySelector("input").required=!1)),e.addEventListener("change",function(){this.value==="other"?(t.style.display="block",t.querySelector("input")&&(t.querySelector("input").required=!0)):(t.style.display="none",t.querySelector("input")&&(t.querySelector("input").required=!1))})}document.addEventListener("change",function(e){if(e.target&&e.target.classList.contains("product-type-select")){const t=e.target.closest(".quote-item");if(t){const o=t.querySelector(".other-product-type-container");o&&(e.target.value==="Autre"?(o.style.display="block",o.querySelector("input")&&(o.querySelector("input").required=!0)):(o.style.display="none",o.querySelector("input")&&(o.querySelector("input").required=!1)))}}});document.addEventListener("change",function(e){if(e.target&&e.target.type==="file"&&e.target.classList.contains("form-control-file")){const t=e.target.closest(".photo-upload-container");if(t){const o=t.querySelector(".product-photo-preview");if(o){if(e.target.files&&e.target.files[0]){const t=new FileReader;t.onload=function(e){o.src=e.target.result,o.style.display="block"},t.readAsDataURL(e.target.files[0])}else o.src="#",o.style.display="none"}}}});const r=document.querySelector(".add-item-btn"),i=document.querySelector(".quote-items-wrapper");r&&i&&r.addEventListener("click",function(){const e=i.dataset.prototype,t=parseInt(i.dataset.index),o=e.replace(/__name__/g,t),n=document.createElement("div");n.classList.add("quote-item"),n.innerHTML=o;const r=document.createElement("span");r.classList.add("remove-item"),r.innerHTML='<i class="fas fa-times-circle"></i>',n.prepend(r),i.appendChild(n),i.dataset.index=t+1});document.addEventListener("click",function(e){if(e.target&&(e.target.classList.contains("remove-item")||e.target.closest(".remove-item"))){const t=e.target.closest(".quote-item");t&&t.remove()}});o&&o.addEventListener("submit",function(){const e=document.querySelector("#submitButton");e&&(e.disabled=!0),n&&(n.style.display="flex")})}); 